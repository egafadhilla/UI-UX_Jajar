<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jelajah Pasar - Marketplace Digital AI</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.css" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 60%, rgba(22, 163, 74, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }
        
        .app-container {
            max-width: 390px;
            margin: 0 auto;
            min-height: 100vh;
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            box-shadow: 
                0 25px 50px -12px rgba(0, 0, 0, 0.25),
                0 0 0 1px rgba(255, 255, 255, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            position: relative;
            border-radius: 24px;
            overflow: hidden;
            backdrop-filter: blur(20px);
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .slide-up {
            animation: slideUp 0.3s ease-out;
        }
        
        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .shake {
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .notification-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        .ripple {
            position: relative;
            overflow: hidden;
        }
        
        .ripple::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .ripple:active::before {
            width: 300px;
            height: 300px;
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #16a34a, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        
        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .loading-skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        .chat-bubble {
            animation: bubbleIn 0.3s ease-out;
        }
        
        @keyframes bubbleIn {
            from { 
                opacity: 0; 
                transform: scale(0.8) translateY(20px); 
            }
            to { 
                opacity: 1; 
                transform: scale(1) translateY(0); 
            }
        }
        
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #6b7280;
            animation: typing 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.4;
            }
            30% {
                transform: translateY(-10px);
                opacity: 1;
            }
        }
        
        .success-checkmark {
            animation: checkmark 0.5s ease-in-out;
        }
        
        @keyframes checkmark {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 24px;
            max-width: 320px;
            width: 90%;
            animation: modalSlideIn 0.3s ease-out;
        }
        
        @keyframes modalSlideIn {
            from { 
                opacity: 0; 
                transform: scale(0.8) translateY(-50px); 
            }
            to { 
                opacity: 1; 
                transform: scale(1) translateY(0); 
            }
        }
        
        .progress-bar {
            width: 100%;
            height: 4px;
            background: #e5e7eb;
            border-radius: 2px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #16a34a, #22c55e);
            animation: progress 3s ease-out;
        }
        
        @keyframes progress {
            from { width: 0%; }
            to { width: 100%; }
        }
        
        /* Modern UI Enhancements */
        .glassmorphism {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }
        
        .gradient-button {
            background: linear-gradient(135deg, #16a34a 0%, #10b981 50%, #059669 100%);
            border: none;
            color: white;
            padding: 16px 24px;
            border-radius: 16px;
            font-weight: 600;
            font-size: 16px;
            box-shadow: 
                0 4px 15px 0 rgba(22, 163, 74, 0.4),
                0 0 0 1px rgba(255, 255, 255, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .gradient-button:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .gradient-button:hover:before {
            left: 100%;
        }
        
        .gradient-button:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 8px 25px 0 rgba(22, 163, 74, 0.5),
                0 0 0 1px rgba(255, 255, 255, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }
        
        .modern-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 
                0 10px 25px -5px rgba(0, 0, 0, 0.1),
                0 4px 6px -2px rgba(0, 0, 0, 0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .modern-card:hover {
            transform: translateY(-5px);
            box-shadow: 
                0 20px 40px -10px rgba(0, 0, 0, 0.15),
                0 8px 12px -4px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }
        
        .product-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.08),
                0 1px 3px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .product-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.12),
                0 5px 15px rgba(0, 0, 0, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }
        
        .header-gradient {
            background: linear-gradient(135deg, #16a34a 0%, #10b981 50%, #059669 100%);
            box-shadow: 
                0 4px 20px rgba(22, 163, 74, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }
        
        .search-bar {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(22, 163, 74, 0.1);
            border-radius: 25px;
            padding: 14px 20px;
            font-size: 16px;
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            width: 100%;
        }
        
        .search-bar:focus {
            outline: none;
            border-color: #16a34a;
            box-shadow: 
                0 0 0 4px rgba(22, 163, 74, 0.1),
                0 4px 20px rgba(22, 163, 74, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            transform: scale(1.02);
        }
        
        .icon-button {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            cursor: pointer;
        }
        
        .icon-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .status-badge {
            background: linear-gradient(135deg, #10b981 0%, #16a34a 100%);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }
        
        .price-tag {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            padding: 6px 12px;
            border-radius: 8px;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(245, 158, 11, 0.3);
        }
        
        /* Particle Animation */
        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
        }
        
        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 6s infinite linear;
        }
        
        @keyframes float {
            0% { transform: translateY(100vh) scale(0); }
            50% { transform: translateY(50vh) scale(1); }
            100% { transform: translateY(-10vh) scale(0); }
        }
        
        /* Enhanced Gradients */
        .gradient-text {
            background: linear-gradient(135deg, #16a34a, #10b981, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .aurora-bg {
            background: linear-gradient(45deg, #667eea, #764ba2, #f093fb, #f5576c);
            background-size: 400% 400%;
            animation: aurora 8s ease-in-out infinite;
        }
        
        @keyframes aurora {
            0%, 100% { background-position: 0% 50%; }
            25% { background-position: 100% 50%; }
            50% { background-position: 100% 100%; }
            75% { background-position: 0% 100%; }
        }
        
        /* Modern Input Styles */
        .modern-input {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid transparent;
            border-radius: 20px;
            padding: 16px 20px;
            font-size: 16px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }
        
        .modern-input:focus {
            outline: none;
            border-color: #16a34a;
            background: rgba(255, 255, 255, 1);
            box-shadow: 
                0 0 0 4px rgba(22, 163, 74, 0.1),
                0 8px 30px rgba(22, 163, 74, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        /* Card Hover Effects */
        .hover-lift:hover {
            transform: translateY(-10px) scale(1.03);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.1),
                0 10px 20px rgba(0, 0, 0, 0.08);
        }
        
        /* Notification styles */
        .notification-enter {
            transform: translateX(100%);
            opacity: 0;
        }
        
        .notification-enter-active {
            transform: translateX(0);
            opacity: 1;
            transition: all 0.3s ease-out;
        }
        
        /* Loading enhanced */
        .modern-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top: 2px solid #ffffff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Icons Component
        const Icon = ({ name, size = 20, color = "currentColor", className = "" }) => {
            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            }, []);
            
            return React.createElement('i', {
                'data-lucide': name,
                style: { width: size, height: size, color },
                className: className
            });
        };

        // Utility Components
        const LoadingSpinner = () => (
            <div className="flex justify-center items-center">
                <div className="modern-spinner"></div>
            </div>
        );

        // Particles Component
        const Particles = () => {
            const particles = Array.from({ length: 15 }, (_, i) => (
                <div
                    key={i}
                    className="particle"
                    style={{
                        left: `${Math.random() * 100}%`,
                        width: `${Math.random() * 6 + 2}px`,
                        height: `${Math.random() * 6 + 2}px`,
                        animationDelay: `${Math.random() * 6}s`,
                        animationDuration: `${Math.random() * 3 + 4}s`
                    }}
                />
            ));

            return <div className="particles">{particles}</div>;
        };

        const NotificationBadge = ({ count }) => (
            count > 0 ? (
                <span className="notification-badge">
                    {count > 99 ? '99+' : count}
                </span>
            ) : null
        );

        const TypingIndicator = () => (
            <div className="typing-indicator p-3 bg-gray-100 rounded-xl max-w-xs">
                <div className="typing-dot"></div>
                <div className="typing-dot"></div>
                <div className="typing-dot"></div>
            </div>
        );

        // Login Screen Component
        const LoginScreen = ({ onLogin }) => {
            const [isLoading, setIsLoading] = useState(false);
            const [formData, setFormData] = useState({ email: '', password: '' });
            const [showSuccess, setShowSuccess] = useState(false);

            const handleLogin = async (e) => {
                e.preventDefault();
                setIsLoading(true);
                
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                setIsLoading(false);
                setShowSuccess(true);
                
                setTimeout(() => {
                    onLogin();
                }, 1000);
            };

            const handleGuestLogin = () => {
                onLogin(true); // true indicates guest mode
            };

            if (showSuccess) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4">
                        <div className="bg-white rounded-2xl shadow-xl p-8 w-full max-w-md text-center">
                            <div className="success-checkmark mb-4">
                                <Icon name="check-circle" size={64} color="#16a34a" className="mx-auto" />
                            </div>
                            <h2 className="text-xl font-bold text-gray-800 mb-2">Login Berhasil!</h2>
                            <p className="text-gray-600">Selamat datang di Jelajah Pasar</p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen flex items-center justify-center p-4 fade-in aurora-bg relative overflow-hidden">
                    <Particles />
                    <div className="modern-card w-full max-w-md relative z-10">
                        <div className="text-center mb-8">
                            <div className="glassmorphism w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 floating">
                                <Icon name="store" size={40} color="#16a34a" />
                            </div>
                            <h1 className="text-3xl font-bold gradient-text mb-2">Jelajah Pasar</h1>
                            <p className="text-gray-600">Platform cerdas untuk pasar tradisional</p>
                        </div>
                        
                        <form onSubmit={handleLogin} className="space-y-6 mb-6">
                            <input 
                                type="text" 
                                placeholder="Email atau Username"
                                value={formData.email}
                                onChange={(e) => setFormData({...formData, email: e.target.value})}
                                className="modern-input w-full"
                                required
                            />
                            <input 
                                type="password" 
                                placeholder="Password"
                                value={formData.password}
                                onChange={(e) => setFormData({...formData, password: e.target.value})}
                                className="modern-input w-full"
                                required
                            />
                            <button 
                                type="submit"
                                disabled={isLoading}
                                className="gradient-button w-full"
                            >
                                {isLoading ? <LoadingSpinner /> : 'Login'}
                            </button>
                        </form>

                        <button 
                            onClick={handleGuestLogin}
                            className="glassmorphism w-full text-gray-700 p-4 rounded-xl font-semibold hover:bg-white/30 transition-all mb-4"
                        >
                            Lanjutkan sebagai Tamu
                        </button>
                        
                        <div className="text-center">
                            <p className="text-gray-600">Belum punya akun? 
                                <span className="text-green-600 font-semibold cursor-pointer hover:underline"> Daftar di sini</span>
                            </p>
                        </div>
                        
                        <div className="mt-6 p-4 bg-green-50 rounded-xl">
                            <p className="text-sm text-green-700 font-semibold mb-2">‚ú® Fitur AI Assistant</p>
                            <p className="text-xs text-green-600">Dengan masuk, Anda menyetujui Terms & Conditions dan kebijakan AI agent kami</p>
                        </div>
                    </div>
                </div>
            );
        };

        // Home Screen Component
        const HomeScreen = ({ isGuest = false }) => {
            const [notifications] = useState(3);
            const [trendingProducts] = useState([
                { id: 1, name: 'Beras Premium', price: 'Rp 12.000/kg', trend: '+5%', seller: 'Toko Makmur', image: 'üåæ' },
                { id: 2, name: 'Cabai Merah', price: 'Rp 35.000/kg', trend: '+12%', seller: 'Pasar Sentral', image: 'üå∂Ô∏è' },
                { id: 3, name: 'Bawang Merah', price: 'Rp 28.000/kg', trend: '-3%', seller: 'Toko Berkah', image: 'üßÖ' }
            ]);

            const [newsFeed] = useState([
                { id: 1, title: 'Harga Beras Stabil Minggu Ini', source: 'BeritaPasar.com', time: '2 jam lalu', category: 'market' },
                { id: 2, title: 'Tips Memilih Sayuran Segar', source: 'AI Market Assistant', time: '4 jam lalu', category: 'tips' },
                { id: 3, title: 'Prediksi Harga Cabai Bulan Depan', source: 'RSS Feed Ekonomi', time: '6 jam lalu', category: 'prediction' }
            ]);

            const [searchQuery, setSearchQuery] = useState('');
            const [showSearch, setShowSearch] = useState(false);

            return (
                <div className="pb-20 fade-in">
                    {/* Header */}
                    <div className="header-gradient text-white p-6">
                        <div className="flex justify-between items-center mb-6">
                            <div>
                                <h1 className="text-2xl font-bold">
                                    {isGuest ? 'Selamat Datang, Tamu!' : 'Selamat Datang!'}
                                </h1>
                                <p className="text-green-100 opacity-90">Jelajah Pasar Digital</p>
                            </div>
                            <div className="flex gap-3 items-center">
                                <div className="relative">
                                    <div className="icon-button">
                                        <Icon name="bell" size={24} className="cursor-pointer" />
                                    </div>
                                    <NotificationBadge count={notifications} />
                                </div>
                                <div className="icon-button" onClick={() => setShowSearch(!showSearch)}>
                                    <Icon name="search" size={24} className="cursor-pointer" />
                                </div>
                            </div>
                        </div>
                        
                        {/* Search Bar */}
                        <div className={`transition-all duration-300 ${showSearch ? 'opacity-100 transform scale-100' : 'opacity-80 transform scale-95'}`}>
                            <div className="relative">
                                <input 
                                    type="text" 
                                    placeholder="Cari produk, toko, atau komunitas..."
                                    value={searchQuery}
                                    onChange={(e) => setSearchQuery(e.target.value)}
                                    className="search-bar pl-12"
                                />
                                <Icon name="search" size={20} color="#16a34a" className="absolute left-4 top-1/2 transform -translate-y-1/2" />
                            </div>
                        </div>
                    </div>

                    <div className="p-6">
                        {/* Guest Mode Notice */}
                        {isGuest && (
                            <div className="glassmorphism rounded-xl p-4 mb-6 slide-up border border-blue-200">
                                <div className="flex items-center gap-3">
                                    <Icon name="info" size={20} color="#3b82f6" />
                                    <div className="flex-1">
                                        <p className="text-sm text-blue-700 font-semibold">Mode Tamu</p>
                                        <p className="text-xs text-blue-600">Daftar untuk akses fitur lengkap AI Assistant</p>
                                    </div>
                                    <button className="gradient-button px-4 py-2 text-sm">
                                        Daftar
                                    </button>
                                </div>
                            </div>
                        )}

                        {/* AI Assistant Card */}
                        {!isGuest && (
                            <div className="modern-card" style={{background: 'linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%)'}}>
                                <div className="flex items-center gap-3 mb-2">
                                    <div className="glassmorphism w-10 h-10 rounded-full flex items-center justify-center">
                                        <Icon name="bot" size={20} color="#ffffff" />
                                    </div>
                                    <h3 className="font-bold text-white">AI Market Assistant</h3>
                                </div>
                                <p className="text-sm mb-3 text-white/90">Dapatkan rekomendasi produk dan analisis harga real-time</p>
                                <button className="glassmorphism px-4 py-2 rounded-lg text-sm font-semibold text-white hover:bg-white/30 transition-colors">
                                    Mulai Chat
                                </button>
                            </div>
                        )}

                        {/* Quick Actions */}
                        <div className="grid grid-cols-2 gap-4 mb-6">
                            <div className="modern-card">
                                <div className="glassmorphism w-12 h-12 rounded-full flex items-center justify-center mb-3">
                                    <Icon name="trending-up" size={24} color="#16a34a" />
                                </div>
                                <h3 className="font-semibold text-gray-800">Tren Pasar</h3>
                                <p className="text-sm text-gray-600">Analisis harga real-time</p>
                            </div>
                            <div className="modern-card">
                                <div className="glassmorphism w-12 h-12 rounded-full flex items-center justify-center mb-3">
                                    <Icon name="message-circle" size={24} color="#3b82f6" />
                                </div>
                                <h3 className="font-semibold text-gray-800">
                                    {isGuest ? 'Lihat Chat' : 'Chat AI'}
                                </h3>
                                <p className="text-sm text-gray-600">
                                    {isGuest ? 'Login untuk chat' : 'Konsultasi dengan penjual'}
                                </p>
                            </div>
                        </div>

                        {/* Trending Products */}
                        <div className="mb-6">
                            <div className="flex justify-between items-center mb-4">
                                <h2 className="text-xl font-bold text-gray-800">Produk Trending</h2>
                                <span className="text-sm text-green-600 font-semibold cursor-pointer hover:underline status-badge">Lihat Semua</span>
                            </div>
                            <div className="space-y-4">
                                {trendingProducts.map((product, index) => (
                                    <div key={product.id} className={`product-card p-4 chat-bubble`} style={{animationDelay: `${index * 0.1}s`}}>
                                        <div className="flex justify-between items-start">
                                            <div className="flex gap-4 flex-1">
                                                <div className="glassmorphism w-16 h-16 rounded-xl flex items-center justify-center text-2xl">
                                                    {product.image}
                                                </div>
                                                <div className="flex-1">
                                                    <h3 className="font-semibold text-gray-800 mb-1">{product.name}</h3>
                                                    <div className="price-tag text-sm mb-1">{product.price}</div>
                                                    <p className="text-sm text-gray-600">{product.seller}</p>
                                                </div>
                                            </div>
                                            <div className="flex flex-col items-end gap-2">
                                                <span className={`status-badge ${
                                                    product.trend.startsWith('+') ? '' : 'bg-red-100 text-red-600'
                                                }`}>
                                                    {product.trend}
                                                </span>
                                                <div className="glassmorphism w-8 h-8 rounded-full flex items-center justify-center cursor-pointer hover:scale-110 transition-transform">
                                                    <Icon name="heart" size={16} color="#9ca3af" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* News Feed */}
                        <div className="mb-6">
                            <div className="flex justify-between items-center mb-3">
                                <h2 className="text-lg font-bold text-gray-800">Berita & Update</h2>
                                <Icon name="rss" size={20} color="#f97316" />
                            </div>
                            <div className="space-y-3">
                                {newsFeed.map((news, index) => (
                                    <div key={news.id} className={`bg-white rounded-xl p-4 shadow-md border card-hover chat-bubble`} style={{animationDelay: `${index * 0.15}s`}}>
                                        <div className="flex items-start gap-3">
                                            <div className={`w-2 h-2 rounded-full mt-2 ${
                                                news.category === 'market' ? 'bg-green-500' :
                                                news.category === 'tips' ? 'bg-blue-500' : 'bg-purple-500'
                                            }`}></div>
                                            <div className="flex-1">
                                                <h3 className="font-semibold text-gray-800 mb-1">{news.title}</h3>
                                                <div className="flex justify-between items-center">
                                                    <p className="text-sm text-gray-600">{news.source}</p>
                                                    <p className="text-xs text-gray-400">{news.time}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Chat AI Screen Component
        const ChatScreen = ({ isGuest = false }) => {
            const [messages, setMessages] = useState([
                {
                    id: 1,
                    type: 'ai',
                    content: 'Halo! Saya AI assistant Anda. Saya dapat membantu Anda dengan:',
                    features: [
                        '‚Ä¢ Analisis harga pasar',
                        '‚Ä¢ Rekomendasi produk',
                        '‚Ä¢ Prediksi trend',
                        '‚Ä¢ Koneksi dengan penjual'
                    ]
                }
            ]);
            const [inputText, setInputText] = useState('');
            const [isTyping, setIsTyping] = useState(false);
            const messagesEndRef = useRef(null);

            const scrollToBottom = () => {
                messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
            };

            useEffect(scrollToBottom, [messages]);

            const sendMessage = async () => {
                if (!inputText.trim()) return;
                if (isGuest) {
                    alert('Silakan login untuk menggunakan AI Assistant');
                    return;
                }

                const userMessage = {
                    id: Date.now(),
                    type: 'user',
                    content: inputText
                };

                setMessages(prev => [...prev, userMessage]);
                setInputText('');
                setIsTyping(true);

                // Simulate AI response
                setTimeout(() => {
                    setIsTyping(false);
                    const aiResponse = {
                        id: Date.now() + 1,
                        type: 'ai',
                        content: generateAIResponse(inputText)
                    };
                    setMessages(prev => [...prev, aiResponse]);
                }, 2000);
            };

            const generateAIResponse = (input) => {
                const responses = {
                    'harga': 'Berdasarkan data RSS feed dan analisis AI, harga cabai minggu depan diprediksi naik 8-10% karena faktor cuaca dan permintaan tinggi.',
                    'cabai': 'Harga cabai saat ini Rp 35.000/kg dengan trend naik 12%. Rekomendasi: beli dalam 2-3 hari ke depan sebelum kenaikan lebih lanjut.',
                    'pasar': 'Pasar terdekat dengan harga terbaik: Pasar Sentral (2.3km), Pasar Malang (3.1km). Keduanya buka 06:00-17:00.',
                    'default': 'Terima kasih atas pertanyaannya! Saya dapat membantu dengan analisis harga, rekomendasi produk, dan informasi pasar. Ada yang ingin Anda tanyakan?'
                };

                const key = Object.keys(responses).find(k => input.toLowerCase().includes(k));
                return responses[key] || responses.default;
            };

            if (isGuest) {
                return (
                    <div className="pb-20 fade-in">
                        <div className="bg-green-600 text-white p-4">
                            <h1 className="text-xl font-bold">AI Chat Assistant</h1>
                            <p className="text-green-100">Powered by N8N & AI Agent</p>
                        </div>
                        
                        <div className="flex-1 flex items-center justify-center p-8">
                            <div className="text-center">
                                <Icon name="lock" size={64} color="#9ca3af" className="mx-auto mb-4" />
                                <h2 className="text-xl font-bold text-gray-800 mb-2">Fitur Terbatas</h2>
                                <p className="text-gray-600 mb-6">Login untuk mengakses AI Assistant dan fitur chat lengkap</p>
                                <button className="bg-green-600 text-white px-6 py-3 rounded-xl font-semibold">
                                    Login Sekarang
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="pb-20 fade-in flex flex-col h-screen">
                    <div className="bg-green-600 text-white p-4">
                        <h1 className="text-xl font-bold">AI Chat Assistant</h1>
                        <p className="text-green-100">Powered by N8N & AI Agent</p>
                    </div>
                    
                    <div className="flex-1 p-4 overflow-y-auto">
                        <div className="space-y-4">
                            {messages.map(message => (
                                <div key={message.id} className={`chat-bubble ${message.type === 'user' ? 'flex justify-end' : 'flex gap-3'}`}>
                                    {message.type === 'ai' && (
                                        <div className="bg-blue-100 p-2 rounded-full flex-shrink-0">
                                            <Icon name="bot" size={20} color="#3b82f6" />
                                        </div>
                                    )}
                                    <div className={`rounded-xl p-3 max-w-xs ${
                                        message.type === 'user' 
                                            ? 'bg-green-600 text-white' 
                                            : 'bg-gray-100 text-gray-800'
                                    }`}>
                                        <p className="text-sm">{message.content}</p>
                                        {message.features && (
                                            <ul className="text-sm mt-2 space-y-1">
                                                {message.features.map((feature, index) => (
                                                    <li key={index}>{feature}</li>
                                                ))}
                                            </ul>
                                        )}
                                    </div>
                                </div>
                            ))}
                            
                            {isTyping && (
                                <div className="flex gap-3">
                                    <div className="bg-blue-100 p-2 rounded-full">
                                        <Icon name="bot" size={20} color="#3b82f6" />
                                    </div>
                                    <TypingIndicator />
                                </div>
                            )}
                            <div ref={messagesEndRef} />
                        </div>
                    </div>
                    
                    <div className="p-4 bg-white border-t">
                        <div className="flex gap-2 mb-2">
                            <input 
                                type="text" 
                                placeholder="Ketik pesan Anda..."
                                value={inputText}
                                onChange={(e) => setInputText(e.target.value)}
                                onKeyPress={(e) => e.key === 'Enter' && sendMessage()}
                                className="flex-1 p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 outline-none"
                            />
                            <button 
                                onClick={sendMessage}
                                className="bg-green-600 text-white p-3 rounded-xl ripple"
                            >
                                <Icon name="send" size={20} />
                            </button>
                        </div>
                        
                        <div className="flex gap-2">
                            <button className="bg-blue-500 text-white px-3 py-1 rounded-full text-xs flex items-center gap-1">
                                <Icon name="phone" size={12} />
                                WhatsApp
                            </button>
                            <button className="bg-blue-400 text-white px-3 py-1 rounded-full text-xs flex items-center gap-1">
                                <Icon name="message-circle" size={12} />
                                Telegram
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // Telusuri Pasar Screen Component
        const TelusuriScreen = () => {
            const [viewMode, setViewMode] = useState('list'); // 'list' or 'map'
            const [searchQuery, setSearchQuery] = useState('');
            const [selectedFilter, setSelectedFilter] = useState('all');
            
            const markets = [
                {
                    id: 1,
                    name: 'Pasar Malang',
                    distance: '2.3 km',
                    rating: 4.5,
                    reviewCount: 127,
                    hours: '06:00 - 17:00',
                    products: 'Sayuran, Buah, Daging',
                    sellerCount: 150,
                    image: 'üè™',
                    isOpen: true
                },
                {
                    id: 2,
                    name: 'Pasar Sentral',
                    distance: '1.8 km',
                    rating: 4.7,
                    reviewCount: 203,
                    hours: '05:00 - 18:00',
                    products: 'Bumbu, Rempah, Ikan',
                    sellerCount: 89,
                    image: 'üè¨',
                    isOpen: true
                },
                {
                    id: 3,
                    name: 'Pasar Tradisional Batu',
                    distance: '5.1 km',
                    rating: 4.2,
                    reviewCount: 95,
                    hours: '06:30 - 16:30',
                    products: 'Buah, Sayuran Organik',
                    sellerCount: 67,
                    image: 'üõí',
                    isOpen: false
                }
            ];

            const filteredMarkets = markets.filter(market => {
                const matchesSearch = market.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
                                    market.products.toLowerCase().includes(searchQuery.toLowerCase());
                const matchesFilter = selectedFilter === 'all' || 
                                    (selectedFilter === 'open' && market.isOpen) ||
                                    (selectedFilter === 'nearby' && parseFloat(market.distance) < 3);
                return matchesSearch && matchesFilter;
            });

            return (
                <div className="pb-20 fade-in">
                    <div className="bg-green-600 text-white p-4">
                        <div className="flex justify-between items-center mb-3">
                            <div>
                                <h1 className="text-xl font-bold">Telusuri Pasar</h1>
                                <p className="text-green-100 text-sm">üìç Malang, Jawa Timur</p>
                            </div>
                            <div className="flex gap-2">
                                <button 
                                    onClick={() => setViewMode(viewMode === 'list' ? 'map' : 'list')}
                                    className="bg-white/20 p-2 rounded-lg"
                                >
                                    <Icon name={viewMode === 'list' ? 'map' : 'list'} size={20} />
                                </button>
                            </div>
                        </div>
                        
                        <div className="bg-white/10 rounded-xl p-3 flex items-center gap-2">
                            <Icon name="search" size={20} color="#bbf7d0" />
                            <input 
                                type="text" 
                                placeholder="Cari pasar, toko, produk..."
                                value={searchQuery}
                                onChange={(e) => setSearchQuery(e.target.value)}
                                className="bg-transparent flex-1 text-white placeholder-green-200 outline-none"
                            />
                            <Icon name="filter" size={20} color="#bbf7d0" />
                        </div>
                    </div>

                    <div className="p-4">
                        {/* Filters */}
                        <div className="flex gap-2 mb-4 overflow-x-auto">
                            {[
                                { id: 'all', label: 'Semua', icon: 'store' },
                                { id: 'open', label: 'Buka', icon: 'clock' },
                                { id: 'nearby', label: 'Terdekat', icon: 'map-pin' }
                            ].map(filter => (
                                <button
                                    key={filter.id}
                                    onClick={() => setSelectedFilter(filter.id)}
                                    className={`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap transition-all ${
                                        selectedFilter === filter.id
                                            ? 'bg-green-600 text-white'
                                            : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                                    }`}
                                >
                                    <Icon name={filter.icon} size={16} />
                                    {filter.label}
                                </button>
                            ))}
                        </div>

                        {/* Map View Placeholder */}
                        {viewMode === 'map' && (
                            <div className="bg-gray-100 rounded-xl h-64 flex items-center justify-center mb-4">
                                <div className="text-center">
                                    <Icon name="map" size={48} color="#9ca3af" className="mx-auto mb-2" />
                                    <p className="text-gray-600 font-semibold">Peta Pasar</p>
                                    <p className="text-gray-500 text-sm">Integrasi Google Maps</p>
                                </div>
                            </div>
                        )}

                        {/* Market List */}
                        <div className="space-y-4">
                            {filteredMarkets.map((market, index) => (
                                <div key={market.id} className={`bg-white rounded-xl p-4 shadow-md border card-hover chat-bubble`} 
                                     style={{animationDelay: `${index * 0.1}s`}}>
                                    <div className="flex gap-4">
                                        <div className="text-3xl">{market.image}</div>
                                        <div className="flex-1">
                                            <div className="flex justify-between items-start mb-2">
                                                <h3 className="font-bold text-gray-800">{market.name}</h3>
                                                <div className="flex gap-1">
                                                    <Icon name="heart" size={16} color="#9ca3af" className="cursor-pointer hover:scale-110 transition-transform" />
                                                    <Icon name="bookmark" size={16} color="#9ca3af" className="cursor-pointer hover:scale-110 transition-transform" />
                                                </div>
                                            </div>
                                            
                                            <div className="space-y-1 text-sm">
                                                <div className="flex items-center gap-2">
                                                    <Icon name="map-pin" size={14} color="#6b7280" />
                                                    <span className="text-gray-600">{market.distance} dari lokasi Anda</span>
                                                </div>
                                                
                                                <div className="flex items-center gap-2">
                                                    <Icon name="star" size={14} color="#f59e0b" />
                                                    <span className="text-gray-600">{market.rating} ({market.reviewCount} ulasan)</span>
                                                </div>
                                                
                                                <div className="flex items-center gap-2">
                                                    <Icon name="clock" size={14} color={market.isOpen ? "#16a34a" : "#ef4444"} />
                                                    <span className={market.isOpen ? "text-green-600" : "text-red-600"}>
                                                        {market.hours} {market.isOpen ? '‚Ä¢ Buka' : '‚Ä¢ Tutup'}
                                                    </span>
                                                </div>
                                                
                                                <div className="flex items-center gap-2">
                                                    <Icon name="shopping-bag" size={14} color="#6b7280" />
                                                    <span className="text-gray-600">{market.products}</span>
                                                </div>
                                                
                                                <div className="flex items-center gap-2">
                                                    <Icon name="users" size={14} color="#6b7280" />
                                                    <span className="text-gray-600">{market.sellerCount}+ pedagang</span>
                                                </div>
                                            </div>
                                            
                                            <div className="flex gap-2 mt-3">
                                                <button className="bg-green-600 text-white px-3 py-1 rounded-lg text-xs font-semibold flex items-center gap-1 ripple">
                                                    <Icon name="navigation" size={12} />
                                                    Navigasi
                                                </button>
                                                <button className="bg-blue-600 text-white px-3 py-1 rounded-lg text-xs font-semibold flex items-center gap-1">
                                                    <Icon name="info" size={12} />
                                                    Info
                                                </button>
                                                <button className="bg-gray-200 text-gray-700 px-3 py-1 rounded-lg text-xs font-semibold flex items-center gap-1">
                                                    <Icon name="user-plus" size={12} />
                                                    Follow
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>

                        {filteredMarkets.length === 0 && (
                            <div className="text-center py-8">
                                <Icon name="search-x" size={48} color="#9ca3af" className="mx-auto mb-2" />
                                <p className="text-gray-600 font-semibold">Tidak ada pasar ditemukan</p>
                                <p className="text-gray-500 text-sm">Coba ubah kata kunci pencarian atau filter</p>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // Profile Screen Component
        const ProfileScreen = ({ isGuest = false }) => {
            const [showModal, setShowModal] = useState(false);
            const [selectedFeature, setSelectedFeature] = useState(null);

            const features = [
                {
                    id: 'shopping',
                    icon: 'list',
                    title: 'Daftar Belanja & To-Do',
                    status: '5 item pending',
                    color: '#3b82f6',
                    description: 'Kelola daftar belanja dan tugas harian Anda'
                },
                {
                    id: 'favorites',
                    icon: 'bookmark',
                    title: 'Toko Favorit',
                    status: '12 toko tersimpan',
                    color: '#9333ea',
                    description: 'Toko-toko pilihan yang sering Anda kunjungi'
                },
                {
                    id: 'wishlist',
                    icon: 'heart',
                    title: 'Wishlist Produk',
                    status: '8 produk diminati',
                    color: '#ef4444',
                    description: 'Produk yang ingin Anda beli di kemudian hari'
                },
                {
                    id: 'social',
                    icon: 'users',
                    title: 'Follower & Following',
                    status: 'Followers: 45 | Following: 23',
                    color: '#16a34a',
                    description: 'Jaringan sosial Anda di komunitas pasar'
                },
                {
                    id: 'settings',
                    icon: 'settings',
                    title: 'Pengaturan',
                    status: 'Kelola akun dan preferensi',
                    color: '#6b7280',
                    description: 'Pengaturan aplikasi dan akun pengguna'
                }
            ];

            const handleFeatureClick = (feature) => {
                if (isGuest && ['shopping', 'favorites', 'wishlist', 'social'].includes(feature.id)) {
                    alert('Silakan login untuk mengakses fitur ini');
                    return;
                }
                setSelectedFeature(feature);
                setShowModal(true);
            };

            if (isGuest) {
                return (
                    <div className="pb-20 fade-in">
                        <div className="bg-green-600 text-white p-4">
                            <h1 className="text-xl font-bold">Profile Tamu</h1>
                        </div>
                        
                        <div className="p-4">
                            <div className="bg-white rounded-xl p-6 shadow-md border mb-6 text-center">
                                <div className="bg-gray-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <Icon name="user" size={40} color="#6b7280" />
                                </div>
                                <h2 className="text-xl font-bold text-gray-800 mb-2">Mode Tamu</h2>
                                <p className="text-gray-600 mb-4">Login untuk akses fitur lengkap</p>
                                <button className="bg-green-600 text-white px-6 py-3 rounded-xl font-semibold">
                                    Login / Daftar
                                </button>
                            </div>

                            <div className="space-y-4">
                                {features.map((feature, index) => (
                                    <div key={feature.id} className={`bg-white rounded-xl p-4 shadow-md border card-hover chat-bubble ${
                                        ['shopping', 'favorites', 'wishlist', 'social'].includes(feature.id) ? 'opacity-50' : ''
                                    }`} style={{animationDelay: `${index * 0.1}s`}}>
                                        <div className="flex items-center gap-3 cursor-pointer" onClick={() => handleFeatureClick(feature)}>
                                            <Icon name={feature.icon} size={20} color={feature.color} />
                                            <div className="flex-1">
                                                <h3 className="font-semibold text-gray-800">{feature.title}</h3>
                                                <p className="text-sm text-gray-600">{feature.status}</p>
                                            </div>
                                            {['shopping', 'favorites', 'wishlist', 'social'].includes(feature.id) && (
                                                <Icon name="lock" size={16} color="#9ca3af" />
                                            )}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="pb-20 fade-in">
                    <div className="bg-green-600 text-white p-4">
                        <h1 className="text-xl font-bold">Profile Pengguna</h1>
                    </div>
                    
                    <div className="p-4">
                        <div className="bg-white rounded-xl p-4 shadow-md border mb-4">
                            <div className="flex items-center gap-4 mb-4">
                                <div className="bg-green-100 w-16 h-16 rounded-full flex items-center justify-center">
                                    <Icon name="user" size={32} color="#16a34a" />
                                </div>
                                <div>
                                    <h2 className="text-xl font-bold">Budi Santoso</h2>
                                    <p className="text-gray-600">Pedagang Pasar Malang</p>
                                    <div className="flex gap-4 text-sm mt-1">
                                        <span className="text-green-600">‚≠ê 4.8 rating</span>
                                        <span className="text-blue-600">üìÖ Member sejak 2023</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="space-y-4">
                            {features.map((feature, index) => (
                                <div key={feature.id} className={`bg-white rounded-xl p-4 shadow-md border card-hover chat-bubble cursor-pointer`} 
                                     style={{animationDelay: `${index * 0.1}s`}}
                                     onClick={() => handleFeatureClick(feature)}>
                                    <div className="flex items-center gap-3">
                                        <Icon name={feature.icon} size={20} color={feature.color} />
                                        <div className="flex-1">
                                            <h3 className="font-semibold text-gray-800">{feature.title}</h3>
                                            <p className="text-sm text-gray-600">{feature.status}</p>
                                        </div>
                                        <Icon name="chevron-right" size={16} color="#9ca3af" />
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    {/* Modal */}
                    {showModal && selectedFeature && (
                        <div className="modal-overlay" onClick={() => setShowModal(false)}>
                            <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                                <div className="flex items-center gap-3 mb-4">
                                    <Icon name={selectedFeature.icon} size={24} color={selectedFeature.color} />
                                    <h3 className="text-lg font-bold">{selectedFeature.title}</h3>
                                </div>
                                <p className="text-gray-600 mb-6">{selectedFeature.description}</p>
                                <div className="progress-bar mb-4">
                                    <div className="progress-fill" style={{width: '60%'}}></div>
                                </div>
                                <div className="flex gap-2">
                                    <button 
                                        onClick={() => setShowModal(false)}
                                        className="flex-1 bg-gray-200 text-gray-700 py-2 rounded-lg font-semibold"
                                    >
                                        Tutup
                                    </button>
                                    <button className="flex-1 bg-green-600 text-white py-2 rounded-lg font-semibold">
                                        Buka Fitur
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Bottom Navigation Component
        const BottomNavigation = ({ currentPage, setCurrentPage, isGuest = false }) => {
            const navItems = [
                { id: 'home', icon: 'home', label: 'Home' },
                { id: 'trends', icon: 'trending-up', label: 'Tren' },
                { id: 'telusuri', icon: 'search', label: 'Telusuri' },
                { id: 'chat', icon: 'message-circle', label: isGuest ? 'Login' : 'Chat' },
                { id: 'profile', icon: 'user', label: 'Profile' }
            ];

            const handleNavClick = (itemId) => {
                if (isGuest && itemId === 'chat') {
                    alert('Silakan login untuk mengakses AI Chat');
                    return;
                }
                setCurrentPage(itemId);
            };

            return (
                <div className="fixed bottom-0 left-1/2 transform -translate-x-1/2 w-full max-w-[390px] bottom-nav slide-up">
                    <div className="flex justify-around py-3">
                        {navItems.map(item => (
                            <button
                                key={item.id}
                                onClick={() => handleNavClick(item.id)}
                                className={`nav-item flex flex-col items-center py-2 px-3 transition-all duration-200 ${
                                    currentPage === item.id 
                                        ? 'nav-item active transform scale-105' 
                                        : 'text-gray-600 hover:text-green-600'
                                }`}
                            >
                                <div className={`${currentPage === item.id ? 'glassmorphism' : ''} w-8 h-8 rounded-full flex items-center justify-center`}>
                                    <Icon name={item.icon} size={20} />
                                </div>
                                <span className="text-xs mt-1 font-medium">{item.label}</span>
                                {currentPage === item.id && (
                                    <div className="w-4 h-1 bg-green-600 rounded-full mt-1 pulse"></div>
                                )}
                            </button>
                        ))}
                    </div>
                </div>
            );
        };

        // Main App Component
        const App = () => {
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            const [isGuest, setIsGuest] = useState(false);
            const [currentPage, setCurrentPage] = useState('home');

            const handleLogin = (guestMode = false) => {
                setIsLoggedIn(true);
                setIsGuest(guestMode);
                setCurrentPage('home');
            };

            const renderPage = () => {
                switch(currentPage) {
                    case 'home':
                        return <HomeScreen isGuest={isGuest} />;
                    case 'chat':
                        return <ChatScreen isGuest={isGuest} />;
                    case 'telusuri':
                        return <TelusuriScreen />;
                    case 'profile':
                        return <ProfileScreen isGuest={isGuest} />;
                    default:
                        return <HomeScreen isGuest={isGuest} />;
                }
            };

            if (!isLoggedIn) {
                return <LoginScreen onLogin={handleLogin} />;
            }

            return (
                <div className="app-container">
                    {renderPage()}
                    <BottomNavigation 
                        currentPage={currentPage} 
                        setCurrentPage={setCurrentPage}
                        isGuest={isGuest}
                    />
                </div>
            );
        };

        // Render the app
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
